import{_ as l}from"./plugin-vue_export-helper-c27b6911.js";import{r as c,o as r,c as p,a as n,b as s,d as a,w as e,e as o}from"./app-46203728.js";const u="/assets/images/work-task/development/web-service/wsdl.png",d="/assets/images/work-task/development/web-service/wsimport.png",k="/assets/images/work-task/development/web-service/wsdl-generated.png",m={},b=o('<h1 id="web-service" tabindex="-1"><a class="header-anchor" href="#web-service" aria-hidden="true">#</a> Web Service</h1><h2 id="浅聊-web-service" tabindex="-1"><a class="header-anchor" href="#浅聊-web-service" aria-hidden="true">#</a> 浅聊 Web Service</h2><p>刚来公司的时候有些项目请求并不是用 Postman 发送 Http 请求，而是用 SoapUI 的工具发送 XML 请求，当时面对那个老旧版本的工具和我个人非常嫌弃的 XML 我直接从头到脚就是抵触，后来我才知道这个东西叫 Web Service。现在用 Web Service 的还多吗，当然是不多，Apache 官网维护的 Web Service 最后一次更新还是在2015年10月，传输 XMl 速度也慢，只能说现在肯定是基于 Http 的 Json 的天下。</p><p>那 Web Service 到底是干什么的呢？它是一种跨编程语言和操作系统平台的远程调用技术，能使得运行在不同机器上的不同应用无须借助附加的、专门的第三方软件或硬件就可相互交换数据或集成。仔细想想只要能暴露接口，用 Json 不是更香，而且实现 Web Service 还得适配 SOAP 协议，实用性就更低了。</p><h2 id="web-service-三要素" tabindex="-1"><a class="header-anchor" href="#web-service-三要素" aria-hidden="true">#</a> Web Service 三要素</h2><p>从表面看，Web Service 就是一个应用程序向外界暴露出一个能通过Web进行调用的API，也就是说能用编程的方法通过 Web 来调用这个应用程序。我们把调用的应用程序叫做客户端，而把提供的应用程序叫做服务端。Web Service 不是一种技术，更像是建立在可互操作的分布式应用程序的新平台，是一个平台，是一套标准，是一种规范。它定义了应用程序如何在 Web 上实现互操作性，而实现这项技术离不开下面介绍的 UDDI，WSDL，SOAP 这三个元素：</p><h3 id="uddi" tabindex="-1"><a class="header-anchor" href="#uddi" aria-hidden="true">#</a> UDDI</h3><p>一种用于描述、发现、集成 Web Service 的技术，它是 Web Service 协议栈的一个重要部分。通过UDDI，企业可以根据自己的需要动态查找并使用Web服务，也可以将自己的Web服务动态地发布到UDDI注册中心，供其他用户使用。</p><h3 id="wsdl" tabindex="-1"><a class="header-anchor" href="#wsdl" aria-hidden="true">#</a> WSDL</h3><p>为了描述 Web 服务发布的XML格式。就是用机器能阅读的方式提供的一个正式描述文档而基于XML（标准通用标记语言下的一个子集）的语言，用于描述 Web Service 及其函数、参数和返回值。</p><h3 id="soap" tabindex="-1"><a class="header-anchor" href="#soap" aria-hidden="true">#</a> SOAP</h3><p>简单对象访问协议，是交换数据的一种协议规范，是一种轻量的、简单的、基于XML标准通用（标记语言下的一个子集）的协议。主要组成由 Http 协议和 XML 数据格式。Web Service 通过 HTTP 协议发送请求和接收结果时，发送的请求内容和结果内容都采用 XML 格式封装，并增加了一些特定的 HTTP 消息头，以说明 HTTP 消息的内容格式，这些特定的 HTTP 消息头和 XML 内容格式就是 SOAP 协议。SOAP 提供了标准的RPC(远程调用技术)方法来调用Web Service。</p><p>了解了这三个元素是什么我们就可以知道 Web Service 主要是通过 SOAP 协议在 Web 上提供的软件服务，使用WSDL 文档进行描述说明服务，并通过 UDDI 进行注册服务供客户端调用。</p><h2 id="web-service-规范" tabindex="-1"><a class="header-anchor" href="#web-service-规范" aria-hidden="true">#</a> Web Service 规范</h2><p>目前有三种规范：JAX-WS（Java API for XML-Based Web Service）、JAXM（Java API for XML Message）、JAX-RS（RESTful 风格）。</p><p>JAX-WS 是用于构建 SOAP 风格的 Web 服务，而 JAX-RS 是用于构建 RESTful 风格的 Web 服务。在这里还是选择前者进行展开，毕竟使用 RESTful 风格的项目较少，因为如果使用 RESTful 风格就都加入 Json 的怀抱了。</p><p>在服务端，用户只需要通过 Java 语言定义远程调用所需要实现的接口（SEI：Service EndPoit Interface），并对其提供相关的实现，通过调用 JAX-WS 的服务来发布接口就可以发布为Web Service 接口。</p><p>在客户端，用户可以通过 JAX-WS 的 API 来创建一个代理来（用本地代理对象来替代远程的服务对象）实现远程服务端的调用。（在使用 JAX-WS 生成远程服务端的代理可以使用 JDK 自带的 wsimport命令来自动生成）。</p><h2 id="快速开始" tabindex="-1"><a class="header-anchor" href="#快速开始" aria-hidden="true">#</a> 快速开始</h2>',19),v=n("br",null,null,-1),h=n("h3",{id:"_1-创建-web-服务",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_1-创建-web-服务","aria-hidden":"true"},"#"),s(" 1. 创建 Web 服务")],-1),w=n("div",{class:"language-java line-numbers-mode","data-ext":"java"},[n("pre",{class:"language-java"},[n("code",null,[n("span",{class:"token doc-comment comment"},`/**
 * @ClassName MyCalculator
 * @Description 简单的加法计算器
 */`),s(`
`),n("span",{class:"token annotation punctuation"},"@WebService"),s(`
`),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"MyCalculator"),s(),n("span",{class:"token punctuation"},"{"),s(`

    `),n("span",{class:"token annotation punctuation"},"@WebMethod"),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"int"),s(),n("span",{class:"token function"},"add"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"int"),s(" a"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token keyword"},"int"),s(" b"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"return"),s(" a "),n("span",{class:"token operator"},"+"),s(" b"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),S=n("div",{class:"language-java line-numbers-mode","data-ext":"java"},[n("pre",{class:"language-java"},[n("code",null,[n("span",{class:"token doc-comment comment"},`/**
 * @ClassName WebServiceSeverMain
 * @Description Web Service 服务主函数
 */`),s(`
`),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"WebServiceSeverMain"),s(),n("span",{class:"token punctuation"},"{"),s(`

    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"static"),s(),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"main"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"String"),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),s(" args"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`

        `),n("span",{class:"token comment"},"// 定义Web服务的地址"),s(`
        `),n("span",{class:"token class-name"},"String"),s(" url "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},'"http://localhost:8080/calculator"'),n("span",{class:"token punctuation"},";"),s(`

        `),n("span",{class:"token comment"},"// 创建Calculator对象"),s(`
        `),n("span",{class:"token class-name"},"MyCalculator"),s(" calculator "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"MyCalculator"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

        `),n("span",{class:"token comment"},"// 发布Web服务"),s(`
        `),n("span",{class:"token class-name"},"Endpoint"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"publish"),n("span",{class:"token punctuation"},"("),s("url"),n("span",{class:"token punctuation"},","),s(" calculator"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

        `),n("span",{class:"token class-name"},"System"),n("span",{class:"token punctuation"},"."),s("out"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"println"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Web服务已发布，访问地址: "'),s(),n("span",{class:"token operator"},"+"),s(" url "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token string"},'"?wsdl"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),f=o('<h3 id="_2-访问-wsdl-文件" tabindex="-1"><a class="header-anchor" href="#_2-访问-wsdl-文件" aria-hidden="true">#</a> 2. 访问 wsdl 文件</h3><figure><img src="'+u+`" alt="wsdl文件" tabindex="0" loading="lazy"><figcaption>wsdl文件</figcaption></figure><h3 id="_3-生成客户端代码" tabindex="-1"><a class="header-anchor" href="#_3-生成客户端代码" aria-hidden="true">#</a> 3. 生成客户端代码</h3><h4 id="使用-jdk-自带的-wsimport-命令" tabindex="-1"><a class="header-anchor" href="#使用-jdk-自带的-wsimport-命令" aria-hidden="true">#</a> 使用 JDK 自带的 wsimport 命令</h4><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>wsimport -s /todir bin http://localhost:8080/calculator?wsdl
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="`+d+'" alt="wsimport用法" tabindex="0" loading="lazy"><figcaption>wsimport用法</figcaption></figure><figure><img src="'+k+'" alt="生成客户端结构" tabindex="0" loading="lazy"><figcaption>生成客户端结构</figcaption></figure><h4 id="ide-工具生成客户端" tabindex="-1"><a class="header-anchor" href="#ide-工具生成客户端" aria-hidden="true">#</a> IDE 工具生成客户端</h4><p>一般 IDE 都带有解析 wsdl 文件的 Tools，像 IntelliJ IDEA 、Eclipse。需要你把网页请求的 XML 存储为后缀为 .wsdl 的文件后解析，非常简单就不做赘述了。</p><h3 id="_4-使用客户端" tabindex="-1"><a class="header-anchor" href="#_4-使用客户端" aria-hidden="true">#</a> 4. 使用客户端</h3><p>将生成的 Java 代码放到客户端项目中，然后调用代理类就可以进行数据访问了，请求时一定要保证服务端正常开启。</p>',11),g=n("div",{class:"language-java line-numbers-mode","data-ext":"java"},[n("pre",{class:"language-java"},[n("code",null,[n("span",{class:"token doc-comment comment"},`/**
 * @ClassName WebServiceCLientMain
 * @Description Web Service 客户端主函数
 */`),s(`
`),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"WebServiceCLientMain"),s(),n("span",{class:"token punctuation"},"{"),s(`

    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"static"),s(),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"main"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"String"),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),s(" args"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token class-name"},"MyCalculatorService"),s(" service "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"MyCalculatorService"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token class-name"},"MyCalculator"),s(" port "),n("span",{class:"token operator"},"="),s(" service"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getMyCalculatorPort"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

        `),n("span",{class:"token keyword"},"int"),s(" num1 "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"10"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"int"),s(" num2 "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"20"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"int"),s(" result "),n("span",{class:"token operator"},"="),s(" port"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"add"),n("span",{class:"token punctuation"},"("),s("num1"),n("span",{class:"token punctuation"},","),s(" num2"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

        `),n("span",{class:"token class-name"},"System"),n("span",{class:"token punctuation"},"."),s("out"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"println"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Result of adding "'),s(),n("span",{class:"token operator"},"+"),s(" num1 "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token string"},'" and "'),s(),n("span",{class:"token operator"},"+"),s(" num2 "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token string"},'" is: "'),s(),n("span",{class:"token operator"},"+"),s(" result"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1);function W(A,y){const i=c("RouterLink"),t=c("CodeDemo");return r(),p("div",null,[b,n("blockquote",null,[n("p",null,[s("所有的测试代码都在博客"),a(i,{to:"/"},{default:e(()=>[s("首页")]),_:1}),s("中的 java-study-demo 中找到。"),v,s(" 注：使用 JDK 17 时发现注解已经被弃用，下面代码建议使用 JDK 8。")])]),h,a(t,{id:"code-demo-65",type:"normal",title:"Web%20Service%20%E6%9C%8D%E5%8A%A1%E7%AB%AF",code:"eJxtkE9LAkEYh7/KMKdVw/UoG1FgHe2yhw5Nh3EddGKcXXZmV0SEoKA/FNEhArODX8CsS5pFX8YxO/UVmnXFzXIYmBneh+d959eEhzjE0IJmOo04SIOtAsNC7OIaAXukZBM/pA6xSUj8IqY8RraJcHzqSeryCAJzCkw6V+qiOx6M1On75LYfwSbiXlBi1AFO5F3lBE0UefWak0JiqY/QpWVQ04BhS5/yyv4BwH5FpBI+WqYJVK89Hp5rc9z/s32iOn31cJRAsQAEPgMbAMGqlJ5lmsx1MKu6Qlr5XD5n6ocTMCxdH8H1vy3O7tXotbAg1ONw+tRNkGIjqYFEpLtxUl+qGql/7usbNThejJ/UdnjZcymX2Vkuomro+dd+2ZdNdkNIUsu6geb1byXjBoILq3p5jvt8v11Oex9fd704I0vHATKzZDL6ulkXZYZgZI6cLcT1hq0fcInTWQ=="},{default:e(()=>[w,S]),_:1}),f,a(t,{id:"code-demo-100",type:"normal",title:"Web%20Service%20%E5%AE%A2%E6%88%B7%E7%AB%AF",code:"eJxtkNFKwzAUhl/l0Ktuk871ciII9dKJ2AsvjBdZG0skTUpyWhlj1/oCvoC3gnqnIL6Nm69hsnQ6R0Mg4c/3/+fkzIMb2tBgHAz7fSKhD0eJoMac0pLBBZumTDc8Y8kJZxInlEvPHDOTaV4hV9JR0GKwfH5c3b99P718vX8s7z5XD6+OHxJZ1VPBM8hcdmcuzInLtqtFDVK0R6N4DqUFwhQ1l8XlFVBdmJ7jHe3WZJZQkdWCotKbTkx7HoJkt11E2DvoToBKabS+NiEqGG4/n9nXtffPzSWCrMuRNY32t1JbPbZ6vKtrZmrhyrhqEc3z0CXsrfn/6enMICsjVWNU2QmgkCEJzr1dXYO12rEACWDgmxi4O5X5rxR7iZuxl3zpzfcXRNodLH4AwFuufA=="},{default:e(()=>[g]),_:1})])}const X=l(m,[["render",W],["__file","web-service.html.vue"]]);export{X as default};
