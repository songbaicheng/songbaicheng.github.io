const a=JSON.parse(`{"key":"v-3ce6eff8","path":"/work-task/development/shell.html","title":"Shell 脚本","lang":"zh-CN","frontmatter":{"category":"工作任务","tag":["Shell"],"description":"Shell 脚本 定时删除过期日志 # ./bin.bash Log_directory=\\"/price/log\\" ＃ 日志地址 days_to_keep=7 ＃ 保留的天数，即七天前的文件将被删除 # 计算七天前的曰期 target_date=$(date -d \\"$days_to_keep days ago\\" + %Y-%m-%d) # 删除七天前日期格式的文件夹 find \\"$log_directory\\" -type d -name \\"????-??-??\\" | while read -r folder; do folder_name=＄(basename \\"$folder\\") # 比较文件夹的日期与目标日期 if [[ $folder_name &lt; $target_date ]]; then echo \\"删除文件夹：$folder\\" rm - rf \\"＄folder\\" fi done # 删除七天前的*.1og.* 格式文件 find \\"$log_directory\\" -type f -name \\"*.1og.*\\" | while read -r file; file_date=$(stat -c \\"%y\\" \\"$file\\" | cut -d' ' -f1) # 比较文件的日期与目标日期 if [[ $file_date &lt; $target_date ]]; then echo \\"删除文件：$file\\" rm \\"$file\\" fi done","head":[["meta",{"property":"og:url","content":"https://github.com/songbaicheng/songbaicheng.github.io/work-task/development/shell.html"}],["meta",{"property":"og:site_name","content":"Baicheng's Blog"}],["meta",{"property":"og:title","content":"Shell 脚本"}],["meta",{"property":"og:description","content":"Shell 脚本 定时删除过期日志 # ./bin.bash Log_directory=\\"/price/log\\" ＃ 日志地址 days_to_keep=7 ＃ 保留的天数，即七天前的文件将被删除 # 计算七天前的曰期 target_date=$(date -d \\"$days_to_keep days ago\\" + %Y-%m-%d) # 删除七天前日期格式的文件夹 find \\"$log_directory\\" -type d -name \\"????-??-??\\" | while read -r folder; do folder_name=＄(basename \\"$folder\\") # 比较文件夹的日期与目标日期 if [[ $folder_name &lt; $target_date ]]; then echo \\"删除文件夹：$folder\\" rm - rf \\"＄folder\\" fi done # 删除七天前的*.1og.* 格式文件 find \\"$log_directory\\" -type f -name \\"*.1og.*\\" | while read -r file; file_date=$(stat -c \\"%y\\" \\"$file\\" | cut -d' ' -f1) # 比较文件的日期与目标日期 if [[ $file_date &lt; $target_date ]]; then echo \\"删除文件：$file\\" rm \\"$file\\" fi done"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-08-07T15:38:34.000Z"}],["meta",{"property":"article:author","content":"songbaicheng"}],["meta",{"property":"article:tag","content":"Shell"}],["meta",{"property":"article:modified_time","content":"2023-08-07T15:38:34.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Shell 脚本\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-08-07T15:38:34.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"songbaicheng\\",\\"url\\":\\"https://github.com/songbaicheng\\",\\"email\\":\\"songbaicheng16@163.com\\"}]}"]]},"headers":[{"level":2,"title":"定时删除过期日志","slug":"定时删除过期日志","link":"#定时删除过期日志","children":[]}],"git":{"createdTime":1691383631000,"updatedTime":1691422714000,"contributors":[{"name":"songbaicheng","email":"2524218694@qq.com","commits":2}]},"readingTime":{"minutes":0.82,"words":245},"filePathRelative":"work-task/development/shell.md","localizedDate":"2023年8月7日","excerpt":"<h1> Shell 脚本</h1>\\n<h2> 定时删除过期日志</h2>\\n<div class=\\"language-bash line-numbers-mode\\" data-ext=\\"sh\\"><pre class=\\"language-bash\\"><code><span class=\\"token comment\\"># ./bin.bash</span>\\n\\n<span class=\\"token assign-left variable\\">Log_directory</span><span class=\\"token operator\\">=</span><span class=\\"token string\\">\\"/price/log\\"</span> ＃ 日志地址\\n<span class=\\"token assign-left variable\\">days_to_keep</span><span class=\\"token operator\\">=</span><span class=\\"token number\\">7</span> ＃ 保留的天数，即七天前的文件将被删除\\n\\n<span class=\\"token comment\\"># 计算七天前的曰期</span>\\n<span class=\\"token assign-left variable\\">target_date</span><span class=\\"token operator\\">=</span><span class=\\"token variable\\"><span class=\\"token variable\\">$(</span><span class=\\"token function\\">date</span> <span class=\\"token parameter variable\\">-d</span> <span class=\\"token string\\">\\"<span class=\\"token variable\\">$days_to_keep</span> days ago\\"</span> + %Y-%m-%d<span class=\\"token variable\\">)</span></span>\\n\\n<span class=\\"token comment\\"># 删除七天前日期格式的文件夹</span>\\n<span class=\\"token function\\">find</span> <span class=\\"token string\\">\\"<span class=\\"token variable\\">$log_directory</span>\\"</span> <span class=\\"token parameter variable\\">-type</span> d <span class=\\"token parameter variable\\">-name</span> <span class=\\"token string\\">\\"????-??-??\\"</span> <span class=\\"token operator\\">|</span> <span class=\\"token keyword\\">while</span> <span class=\\"token builtin class-name\\">read</span> <span class=\\"token parameter variable\\">-r</span> folder<span class=\\"token punctuation\\">;</span> <span class=\\"token keyword\\">do</span>\\n    <span class=\\"token assign-left variable\\">folder_name</span><span class=\\"token operator\\">=</span>＄<span class=\\"token punctuation\\">(</span>basename <span class=\\"token string\\">\\"<span class=\\"token variable\\">$folder</span>\\"</span><span class=\\"token punctuation\\">)</span>\\n\\n    <span class=\\"token comment\\"># 比较文件夹的日期与目标日期</span>\\n    <span class=\\"token keyword\\">if</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">[</span> <span class=\\"token variable\\">$folder_name</span> <span class=\\"token operator\\">&lt;</span> <span class=\\"token variable\\">$target_date</span> <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">;</span> <span class=\\"token keyword\\">then</span>\\n        <span class=\\"token builtin class-name\\">echo</span> <span class=\\"token string\\">\\"删除文件夹：<span class=\\"token variable\\">$folder</span>\\"</span>\\n        <span class=\\"token function\\">rm</span> - rf <span class=\\"token string\\">\\"＄folder\\"</span>\\n    <span class=\\"token keyword\\">fi</span>\\n<span class=\\"token keyword\\">done</span>\\n\\n<span class=\\"token comment\\"># 删除七天前的*.1og.* 格式文件</span>\\n<span class=\\"token function\\">find</span> <span class=\\"token string\\">\\"<span class=\\"token variable\\">$log_directory</span>\\"</span> <span class=\\"token parameter variable\\">-type</span> f <span class=\\"token parameter variable\\">-name</span> <span class=\\"token string\\">\\"*.1og.*\\"</span> <span class=\\"token operator\\">|</span> <span class=\\"token keyword\\">while</span> <span class=\\"token builtin class-name\\">read</span> <span class=\\"token parameter variable\\">-r</span> <span class=\\"token function\\">file</span><span class=\\"token punctuation\\">;</span>\\n    <span class=\\"token assign-left variable\\">file_date</span><span class=\\"token operator\\">=</span><span class=\\"token variable\\"><span class=\\"token variable\\">$(</span><span class=\\"token function\\">stat</span> <span class=\\"token parameter variable\\">-c</span> <span class=\\"token string\\">\\"%y\\"</span> <span class=\\"token string\\">\\"<span class=\\"token variable\\">$file</span>\\"</span> <span class=\\"token operator\\">|</span> <span class=\\"token function\\">cut</span> -d<span class=\\"token string\\">' '</span> <span class=\\"token parameter variable\\">-f1</span><span class=\\"token variable\\">)</span></span>\\n\\n    <span class=\\"token comment\\"># 比较文件的日期与目标日期</span>\\n    <span class=\\"token keyword\\">if</span> <span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">[</span> <span class=\\"token variable\\">$file_date</span> <span class=\\"token operator\\">&lt;</span> <span class=\\"token variable\\">$target_date</span> <span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">;</span> <span class=\\"token keyword\\">then</span>\\n        <span class=\\"token builtin class-name\\">echo</span> <span class=\\"token string\\">\\"删除文件：<span class=\\"token variable\\">$file</span>\\"</span>\\n        <span class=\\"token function\\">rm</span> <span class=\\"token string\\">\\"<span class=\\"token variable\\">$file</span>\\"</span>\\n    <span class=\\"token keyword\\">fi</span>\\n<span class=\\"token keyword\\">done</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}`);export{a as data};
